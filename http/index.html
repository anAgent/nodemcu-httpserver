<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <title>Served by an ESP8266</title>
   <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
   <link href="main.css" rel="stylesheet" type="text/css">
</head>
<body>
<h2>Hello World!</h2>

<!-- Standard button -->
<button type="button" class="btn btn-default">Default</button>

<!-- Provides extra visual weight and identifies the primary action in a set of buttons -->
<button type="button" class="btn btn-primary">Primary</button>

<!-- Indicates a successful or positive action -->
<button type="button" class="btn btn-success">Success</button>

<!-- Contextual button for informational alert messages -->
<button type="button" class="btn btn-info">Info</button>

<!-- Indicates caution should be taken with this action -->
<button type="button" class="btn btn-warning">Warning</button>

<!-- Indicates a dangerous or potentially negative action -->
<button type="button" class="btn btn-danger">Danger</button>

<!-- Deemphasize a button by making it look like a link while maintaining button behavior -->
<button type="button" class="btn btn-link">Link</button>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</body>

<script>
   $(function() {
      var state = true;
      /**
       * Callback function to make a test reqest.
       * @param $button
       * @param pin
       * @returns {*}
       */
      function makeRequest($button, pin) {
         $button.attr('disabled', 'disabled');

         return $.ajax({
            url: 'test.lua',
            data: {
               pin: pin,
               state: state ? 'low' : 'high'
            }, context: this
         }).success(function(data) {
            $button.toggleClass('btn-success', data.state === 1);
         });
      }

      $('.btn.btn-default').on('click', function(e) {
         makeRequest($(this), 4)
           .always(function() {
              state = !state;
           });
      });
   });
</script>
</html>
